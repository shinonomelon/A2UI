# A2UI: エージェントからユーザーへのインターフェース

A2UI は、エージェントが生成・更新するユーザーインターフェース（UI）を表現するのに最適化されたフォーマットと、初期セットのレンダラーを備えたオープンソースプロジェクトです。これにより、エージェントがリッチなユーザーインターフェースを生成し、ユーザーに提示することができます。

<img src="docs/assets/a2ui_gallery_examples.png" alt="A2UIコンポーネントのギャラリー" height="400">

_A2UI でレンダリングされたカードのギャラリー。A2UI が実現できる多様な UI 構成例です。_

## ⚠️ ステータス: 初期段階のパブリックプレビュー

> **注記:** A2UI は現在**v0.8（パブリックプレビュー）**です。仕様および実装は既に動作しますが、今後も進化していきます。本プロジェクトは協力・フィードバック・コントリビューション（例: クライアントレンダラーの実装）を広く募集するためにオープンしています。今後の変更にご留意ください。

## 概要

生成 AI は文章やコードの作成に優れていますが、エージェントがユーザーに向けてリッチでインタラクティブな UI を提示するのは、特にリモート環境や信頼境界をまたぐ場合に困難です。

**A2UI**はエージェントが「UI を話す」ためのオープンな標準仕様とライブラリです。エージェントは UI の*意図*を記述した宣言的な JSON フォーマットを送信します。クライアントアプリケーションはこれを受け取り、自身のネイティブコンポーネントライブラリ（Flutter、Angular、Lit など）を用いて UI をレンダリングします。

このアプローチにより、エージェント生成 UI は
**データのように安全で、コードのように表現豊か**
となります。

## 基本理念

A2UI は、エージェントによる相互運用・クロスプラットフォーム・生成/テンプレート型 UI 応答の課題解決のために設計されました。

プロジェクトのコア理念：

- **セキュリティ最優先**：LLM が生成した任意コードの実行はセキュリティリスクとなり得ます。A2UI は実行コードではなく、宣言的なデータフォーマットです。クライアントアプリは信頼できる（事前承認された）UI コンポーネント（例：Card, Button, TextField 等）の「カタログ」を保持し、エージェントはそのカタログに登録されたものだけをレンダリング指示できます。
- **LLM 親和性と増分更新性**：UI は ID 参照を持つフラットなコンポーネントリストとして表現されており、LLM にとって容易に逐次生成でき、漸進的レンダリングやレスポンシブな UX が実現できます。エージェントは会話の進行に応じて効率よく UI を差分更新可能です。
- **フレームワーク非依存・移植性**：A2UI は UI 構造とその実装を分離します。エージェントはコンポーネントツリーの記述とデータモデルを送信し、クライアントアプリ側でそれをネイティブウィジェット（Web コンポーネント、Flutter ウィジェット、React コンポーネント、SwiftUI ビュー等）へマッピングします。同一の A2UI JSON ペイロードが、異なるフレームワーク上で動作する複数クライアントで共通してレンダリング可能です。
- **柔軟性**：A2UI はオープンレジストリパターンも提供しており、開発者はサーバ側型にカスタムクライアント実装（ネイティブモバイルウィジェットから React コンポーネントまで）をマッピングできます。"スマートラッパー"を登録することで、既存の UI コンポーネント（レガシーコンテンツ対応の安全な iframe コンテナも含む）を A2UI のデータバインディング・イベントシステムに接続が可能です。こうした柔軟な設計により、カスタムコンポーネント内で独自のサンドボックス・「信頼の階段」ポリシーを厳格に強制でき、セキュリティが開発者の手の内にある状態を実現します。

## ユースケース

主なユースケース例：

- **動的なデータ収集:** エージェントが会話文脈に応じた特化フォーム（日付ピッカー、スライダー、各種入力欄など）を生成します（例: 特殊な予約フォーム）。
- **リモートサブエージェント:** オーケストレータエージェントがリモートで専門タスク（例: 旅行予約エージェント）を委託し、そのエージェントがチャットウィンドウ内でレンダリングされる UI ペイロードを返します。
- **適応型ワークフロー:** エンタープライズエージェントがユーザーの問いに応じて承認用のダッシュボードやデータ可視化画面を動的生成します。

## アーキテクチャ

A2UI のフローは、UI の生成と実行を切り分けます：

1. **生成:** エージェント（Gemini 等の LLM 用いたもの）は、UI 構成やプロパティを記述した`A2UI Response`（JSON ペイロード）を生成または選択します。
2. **転送:** このメッセージがクライアントアプリケーション（A2A、AG UI 等経由）に送信されます。
3. **解決:** クライアントの**A2UI レンダラー**がその JSON をパースします。
4. **レンダリング:** レンダラーが抽象コンポーネント（例:`type: 'text-field'`）をクライアント実装内の具体的な部品にマッピングします。

## 依存関係

A2UI は軽量なフォーマットですが、広範なエコシステムの中で活用できます：

- **トランスポート:** **A2A プロトコル**や**AG UI**と互換性があります。
- **LLM:** JSON 出力が可能な任意のモデルで生成できます。
- **ホストフレームワーク:** サポート対象のフレームワーク（現状は Web または Flutter）を用いたホストアプリケーションが必要です。

## はじめかた

A2UI を最もよく理解するには、サンプルを実行するのが早道です。

### 前提条件

- Node.js（Web クライアント用）
- Python（エージェントサンプル用）
- 有効な[Gemini API Key](https://aistudio.google.com/)（サンプル実行に必要）

### レストラン検索デモの実行

1. **リポジトリをクローン：**

   ```bash
   git clone https://github.com/google/A2UI.git
   cd A2UI
   ```

2. **API キーを設定：**

   ```bash
   export GEMINI_API_KEY="your_gemini_api_key"
   ```

3. **エージェント（バックエンド）を起動：**

   ```bash
   cd samples/agent/adk/restaurant_finder
   uv run .
   ```

4. **クライアント（フロントエンド）を起動：**
   新しいターミナルウィンドウを開いてください。

   ```bash
   # Litレンダラーのインストールとビルド
   cd renderers/lit
   npm install
   npm run build

   # シェルクライアントのインストールと起動
   cd ../../samples/client/lit/shell
   npm install
   npm run dev
   ```

Flutter 開発者の方は、A2UI を基盤としている[GenUI SDK](https://github.com/flutter/genui)もご参照ください。

また、CopilotKit のパブリック[A2UI Widget Builder](https://go.copilotkit.ai/A2UI-widget-builder)も体験いただけます。

## ロードマップ

今後、次のような事項でコミュニティの皆様と協力したいと考えています：

- **仕様安定化:** v1.0 仕様に向けての成熟化
- **レンダラー拡充:** React, Jetpack Compose, iOS (SwiftUI)等への公式拡張
- **追加トランスポート対応:** REST 等のサポート
- **エージェントフレームワーク拡充:** Genkit, LangGraph 等への対応

## コントリビュートについて

A2UI は**Apache 2.0**ライセンスのプロジェクトです。私たちは、UI の未来はエージェント中心型であると信じており、その実現に向けて皆さんとともに開発していきたいと願っています。

コントリビュートの詳細については、[CONTRIBUTING.md](CONTRIBUTING.md)をご覧ください。
